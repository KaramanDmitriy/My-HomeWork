"use strict";var modalHTML,API_KEY="9266439c";function serchMovie(t,n,a){var r,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("https://www.omdbapi.com/?apikey=".concat(API_KEY,"&s=").concat(t,"&type=").concat(n,"&y=").concat(a)));case 2:return r=e.sent,e.next=5,regeneratorRuntime.awrap(r.json());case 5:if("False"===(o=e.sent).Response)return alert(o.Error),e.abrupt("return");e.next=9;break;case 9:showMoviesList(o.Search);case 10:case"end":return e.stop()}})}function fetchMovieDetails(t){var n,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(fetch("https://www.omdbapi.com/?apikey=".concat(API_KEY,"&i=").concat(t,"&plot=full")));case 2:return n=e.sent,e.next=5,regeneratorRuntime.awrap(n.json());case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}})}function showMoviesList(e){var n=document.getElementById("movies-list");n.innerHTML="",e.forEach(function(e){var t=document.createElement("div");t.classList.add("col-md-12","mb-4"),t.innerHTML='\n            <div class="card">\n                <img src="'.concat("N/A"!==e.Poster?e.Poster:"assets/images/reklama.jpg",'" class="card-img-top" alt="').concat(e.Title,'">\n                <div class="card-body">\n                    <h5 class="card-title">').concat(e.Title,'</h5>\n                    <p class="card-text">Year: ').concat(e.Year,'</p>\n                </div>\n                <button class="btn btn-primary details-btn" data-imdbid="').concat(e.imdbID,'">Details</button>\n            </div>\n        '),n.appendChild(t)}),document.querySelectorAll(".details-btn").forEach(function(e){e.addEventListener("click",function(){var t,n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getAttribute("data-imdbid"),e.next=3,regeneratorRuntime.awrap(fetchMovieDetails(t));case 3:n=e.sent,document.getElementById("modal-title").textContent=n.Title,document.getElementById("modal-body").innerHTML='\n                <img src="'.concat("N/A"!==n.Poster?n.Poster:"assets/images/reklama.jpg",'" class="img-fluid mb-2" alt="').concat(n.Title,'">\n                <p><strong>Year:</strong> ').concat(n.Year,"</p>\n                <p><strong>Genre:</strong> ").concat(n.Genre,"</p>\n                <p><strong>Director:</strong> ").concat(n.Director,"</p>\n                <p><strong>Actors:</strong> ").concat(n.Actors,"</p>\n                <p><strong>Plot:</strong> ").concat(n.Plot,"</p>\n                <p><strong>IMDB Rating:</strong> ").concat(n.imdbRating,'</p>\n                <div class="progress" role="progressbar" aria-label="').concat(7<=n.imdbRating?"Success":4<=n.imdbRating?"Warning":"Danger",' example" aria-valuenow="').concat(10*n.imdbRating,'" aria-valuemin="0" aria-valuemax="100">\n                    <div class="progress-bar text-bg-').concat(7<=n.imdbRating?"success":4<=n.imdbRating?"warning":"danger",'" style="width: ').concat(10*n.imdbRating,'%"></div>\n                </div>\n            '),new bootstrap.Modal(document.getElementById("movie-modal")).show();case 8:case"end":return e.stop()}},null,this)})})}document.getElementById("movie-modal")||(modalHTML='\n    <div class="modal fade" id="movie-modal" tabindex="-1" aria-hidden="true">\n      <div class="modal-dialog">\n        <div class="modal-content">\n          <div class="modal-header">\n            <h5 class="modal-title" id="modal-title"></h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n          </div>\n          <div class="modal-body" id="modal-body"></div>\n        </div>\n      </div>\n    </div>',document.body.insertAdjacentHTML("beforeend",modalHTML));var form=document.getElementById("search-form");form.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("search-input").value.trim(),n=document.getElementById("type").value,a=document.getElementById("year").value.trim();""!==t&&serchMovie(t,n,a)}),document.getElementById("year").setAttribute("max",(new Date).getFullYear());